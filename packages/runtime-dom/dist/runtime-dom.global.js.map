{
  "version": 3,
  "sources": ["../src/index.ts", "../src/nodeOps.ts", "../src/modules/class.ts", "../src/modules/event.ts", "../src/modules/style.ts", "../src/modules/attr.ts", "../src/patchProp.ts", "../../reactivity/src/effect.ts", "../../shared/src/index.ts", "../../reactivity/src/baseHandlers.ts", "../../reactivity/src/reactive.ts", "../../reactivity/src/computed.ts", "../../reactivity/src/ref.ts", "../../reactivity/src/watch.ts", "../../runtime-core/src/sequence.ts", "../../runtime-core/src/scheduler.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/componentProps.ts", "../../runtime-core/src/componentSlots.ts", "../../runtime-core/src/component.ts", "../../runtime-core/src/renderer.ts", "../../runtime-core/src/h.ts", "../../runtime-core/src/apiLifeCycle.ts"],
  "sourcesContent": ["import { nodeOps } from \"./nodeOps\";\r\nimport { patchProp } from \"./patchProp\";\r\nimport { createRenderer } from \"@vue/runtime-core\";\r\n\r\nexport const renderOptions = Object.assign(nodeOps,{ patchProp })\r\n\r\n\r\nexport function render(vnode: any,container: any){\r\n    createRenderer(renderOptions).render(vnode,container);\r\n}\r\n\r\nexport * from '@vue/runtime-core'\r\n", "\r\n//  node\u8282\u70B9\u64CD\u4F5C\r\nexport const nodeOps = {\r\n    /**\r\n     * \r\n     * @param child \u5C06\u8981\u63D2\u5165\u7684\u8282\u70B9\r\n     * @param parent \u7236\u8282\u70B9\r\n     * @param anchor \u88AB\u53C2\u7167\u7684\u8282\u70B9\uFF08\u5373\u8981\u63D2\u5728\u8BE5\u8282\u70B9\u4E4B\u524D\uFF09,\u5F53\u4F20\u5165null\u65F6\uFF0C\u65B0\u63D2\u5165\u7684\u5143\u7D20\u5C06\u4F1A\u63D2\u5165\u5230\u7236\u5143\u7D20\u7684\u5B50\u5143\u7D20\u5217\u8868\u672B\u5C3E\u3002\r\n     */\r\n\r\n    insert(child: any,parent: any,anchor = null){\r\n        parent.insertBefore(child,anchor);\r\n    },\r\n\r\n    remove(child:any){\r\n        const parentNode = child.parentNode;\r\n        if(parentNode){\r\n            parentNode.removeChild(child);\r\n        }\r\n    },\r\n    // \u6587\u672C\u8282\u70B9 || \u5143\u7D20\u4E2D\u7684\u5185\u5BB9 textContent:\u8BBE\u7F6E\u8282\u70B9\u7684\u6587\u672C\u5185\u5BB9\r\n    setElementText(el: any,text: any){\r\n        el.textContent = text;\r\n    },\r\n    // nodeValue \u5C5E\u6027\u8BBE\u7F6E\u6216\u8FD4\u56DE\u6307\u5B9A\u8282\u70B9\u7684\u8282\u70B9\u503C\r\n    setText(node: any,text: any){\r\n        node.nodeValue = text;\r\n    },\r\n    querySelector(selector: any){\r\n        return document.querySelector(selector)\r\n    },\r\n    parentNode(node:any){\r\n        return node.parentNode;\r\n    },\r\n    /**\r\n    *    nextSibling \u5C5E\u6027\u8FD4\u56DE\u6307\u5B9A\u8282\u70B9\u4E4B\u540E\u7D27\u8DDF\u7684\u8282\u70B9\uFF0C\u5728\u76F8\u540C\u7684\u6811\u5C42\u7EA7\u4E2D\u3002\r\n    *   \u88AB\u8FD4\u56DE\u7684\u8282\u70B9\u4EE5 Node \u5BF9\u8C61\u8FD4\u56DE\u3002\r\n    *   \u6CE8\u91CA\uFF1A\u5982\u679C\u6CA1\u6709 nextSibling \u8282\u70B9\uFF0C\u5219\u8FD4\u56DE\u503C\u4E3A null\u3002\r\n    */\r\n    nextSibling(node:any){\r\n        return node.nextSibling\r\n    },\r\n    createElement(tagName: any){\r\n        return document.createElement(tagName);\r\n    },\r\n    createText(text: any){\r\n        return document.createTextNode(text);\r\n    }\r\n\r\n}", "export function patchClass(el: any,nextValue: string){\r\n    if(nextValue == null){\r\n        el.removeAttribute('class')\r\n    }else{\r\n        el.className = nextValue\r\n    }\r\n}", "function createInvokers(callback: (e: any) => any){\r\n    const invoker = (e: any) => invoker.value(e)\r\n    invoker.value = callback\r\n    return invoker;\r\n}\r\nexport function patchEvent(el: any,eventName: any,nextValue: any){\r\n    // \u5148\u79FB\u9664\u4E8B\u4EF6\uFF0C\u518D\u91CD\u65B0\u6DFB\u52A0\u4E8B\u4EF6\r\n    // console.log('00',el,'----',eventName,'----',nextValue)\r\n    /**\r\n     * @param invokers\r\n     * {\r\n     *  'click':btnClick,\r\n     *  'mouseenter':btnMouseEnter,\r\n     * .....\r\n     * }\r\n     */\r\n    // debugger\r\n    let invokers =  el._vui || (el._vui = {})\r\n    let exits =  invokers[eventName]// \u5148\u770B\u6709\u6CA1\u6709\u7F13\u5B58\u8FC7\r\n\r\n    if(exits && nextValue){ // \u5DF2\u7ECF\u7ED1\u5B9A\u8FC7\u4E8B\u4EF6\u4E86\r\n        exits.value = nextValue // \u6CA1\u6709\u5378\u8F7D\u51FD\u6570\uFF0C\u53EA\u662F\u6539\u53D8\u4E86invoker.value\u7684\u503C\r\n    }else{// onClick -> click \uFF0C\u4E0D\u5B58\u5728\u5C31\u7ED1\u5B9A\u4E8B\u4EF6\r\n        let event =  eventName.slice(2).toLowerCase()\r\n        if(nextValue){\r\n            const invoker =  invokers[eventName] = createInvokers(nextValue) \r\n            el.addEventListener(event,invoker)\r\n        }else if(exits){ // \u5982\u679C\u5B58\u5728\u65E7\u7684\u503C\uFF0C\u5C31\u8981\u79FB\u9664\u6389\u8001\u7684\u7ED1\u5B9A\u4E8B\u4EF6\r\n            el.removeEventListener(event,exits)\r\n            invokers[eventName] = undefined;\r\n        }\r\n        \r\n    }\r\n\r\n}\r\n// document.querySelector('html').addEventListener('click',function(e) {\r\n//     console.log(e.composed);\r\n//     console.log(e.composedPath());\r\n//   });", "export function patchStyle(el: any,preValue: any,nextValue: any ){\r\n    // \u53BB\u9664\u4E4B\u524D\u6709\u7684\uFF0C\u4E4B\u540E\u6CA1\u6709\u7684\u5C5E\u6027\r\n    for(let key in nextValue){\r\n        el.style[key] = nextValue[key];\r\n    }\r\n\r\n    if(preValue){\r\n        for(let key in preValue){\r\n            if(nextValue[key] ==  null){\r\n                el.style[key] = null\r\n            }\r\n        }\r\n    }\r\n}", "export function patchAttr(el: any,key: string,nextValue: any){\r\n    if(nextValue){\r\n        el.setAttribute(key,nextValue);\r\n    }else{\r\n        el.removeAttribute(key);\r\n    }\r\n}", "import { patchClass } from \"./modules/class\";\r\nimport { patchEvent } from \"./modules/event\";\r\nimport { patchStyle } from \"./modules/style\";\r\nimport { patchAttr } from \"./modules/attr\";\r\n// dom\u5C5E\u6027\u7684\u64CD\u4F5C api\r\n// <div class=\"preValue\"></div> --> <div class=\"nextValue\"></div> \r\n// <div @click=\"clickTest\"></div> -->  <div onclick=\"clickTest2\"></div>\r\n/**\r\n * \r\n * @param el dom\u5143\u7D20\r\n * @param key \u6807\u7B7E\u5C5E\u6027\u540D\uFF0C\u5982\u4E0A\u9762\u7684\uFF0Cclass,onclick.....\r\n * @param preValue \u4E4B\u524D\u7684\u503C \u5982\u4E0A\u9762\u6240\u793A\r\n * @param nextValue \u4E4B\u540E\u7684\u503C \u5982\u4E0A\u9762\u6240\u793A\r\n */\r\n\r\nexport function patchProp(el: any,key: string,preValue: any,nextValue: any){\r\n    if(key === 'class'){ // \u7C7B\u540D el.className\r\n        patchClass(el,nextValue)\r\n    }else if(key === 'style'){ // \u6837\u5F0F el.style\r\n        // el style -> {color: 'white',fontWeight: 'bold} -> {color: 'black'},\u6BD4\u8F83\u524D\u540E\u4E24\u6B21\u7684\u5DEE\u5F02\r\n        patchStyle(el,preValue,nextValue)\r\n    }else if(/^on[^a-z]/.test(key)){  // events addevenListener\r\n    \r\n        patchEvent(el,key,nextValue)\r\n    }else{ // \u666E\u901A\u5C5E\u6027 el.setAttribute\r\n        patchAttr(el,key,nextValue)\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n   \r\n\r\n\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n\r\n// \u865A\u62DFdom\r\n// \u5982\u4F55\u521B\u5EFA\u771F\u5B9Edom\r\n// dom diff \u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\r\n// \u7EC4\u4EF6\u7684\u5B9E\u73B0\uFF0C\u6A21\u677F\u6E32\u67D3 \uFF0C\u6838\u5FC3\u7684\u7EC4\u4EF6\u66F4\u65B0\r\n\r\n// \u6A21\u677F\u7F16\u8BD1\u539F\u7406 + \u4EE3\u7801\u8F6C\u5316 + \u4EE3\u7801\u751F\u6210\uFF08\u7F16\u8BD1\u4F18\u5316\uFF09\r\n", "export let activeEffect:any = undefined\r\n\r\nfunction clearupEffect(effect:ReactiveEffect){\r\n    const { deps } = effect;\r\n    for(let i = 0;i<deps.length;i++){\r\n        deps[i].delete(effect)\r\n    }\r\n    effect.deps.length = 0;\r\n}\r\n\r\nexport class ReactiveEffect{\r\n    public active:boolean = true;//\u8FD9\u4E2Aeffect\u9ED8\u8BA4\u662F\u6FC0\u6D3B\u72B6\u6001\r\n    public deps:Array<any> = [];//\u8BB0\u5F55\u5F53\u524Deffect\u88AB\u54EA\u4E9B\u5C5E\u6027\u6536\u96C6\u8FC7\uFF0C\u65B9\u4FBF\u6E05\u7406\r\n    public parent = null;\r\n\r\n    constructor(public fn: () => any,public scheduler?:() => any){}\r\n\r\n    run(){\r\n        if(!this.active){\r\n            return this.fn()\r\n        }\r\n        try{\r\n            this.parent = activeEffect\r\n            activeEffect = this\r\n            // \u6267\u884C\u7528\u6237\u51FD\u6570\u4E4B\u524D\u5C06\u4E4B\u524D\u6536\u96C6\u7684\u5185\u5BB9\u6E05\u7A7A\r\n            clearupEffect(this)\r\n            return this.fn()\r\n        }finally{\r\n            activeEffect = this.parent\r\n        }\r\n    }\r\n    stop(){\r\n        if(this.active){\r\n            this.active = false;\r\n            clearupEffect(this);//\u505C\u6B62effect\u7684\u6536\u96C6\r\n        }\r\n    }\r\n}\r\n// scheduler --> \u8C03\u5EA6\u5668 --> \u7531\u7528\u6237\u81EA\u5DF1\u51B3\u5B9A\u5982\u4F55\u66F4\u65B0\r\nexport function effect(fn: () => any,options:any={}){\r\n    // fn\u53EF\u4EE5\u6839\u636E\u72B6\u6001\u53D8\u5316\u81EA\u52A8\u91CD\u65B0\u6267\u884C\uFF0Ceffect\u53EF\u4EE5\u5D4C\u5957\r\n    const _effect = new ReactiveEffect(fn,options.scheduler)\r\n    _effect.run();//\u9ED8\u8BA4\u5148\u6267\u884C\u4E00\u6B21\r\n\r\n    const runner:any = _effect.run.bind(_effect) \r\n    runner.effect = _effect\r\n    return runner;\r\n}\r\n\r\nconst targetMap:WeakMap<object,Map<string,Set<ReactiveEffect>>> = new WeakMap();\r\n\r\nexport function track(target: object,type: any,key: any){\r\n    if(!activeEffect) return;\r\n    let depsMap:Map<string,Set<ReactiveEffect>> | undefined = targetMap.get(target);\r\n    if(!depsMap){\r\n        targetMap.set(target,depsMap=new Map())\r\n    }\r\n    let dep:Set<ReactiveEffect> | undefined = depsMap.get(key)\r\n    if(!dep){\r\n        depsMap.set(key,(dep = new Set()))\r\n    }\r\n    //\u628A\u4F9D\u8D56\u653E\u8FDBSet\u6570\u636E\u7ED3\u6784\u91CC\u9762\r\n    trackEffects(dep)\r\n}\r\n\r\nexport function trackEffects(dep:Set<ReactiveEffect>){\r\n    if(activeEffect){\r\n        let shouldTrack = !dep.has(activeEffect)\r\n        if(shouldTrack){\r\n\r\n            dep.add(activeEffect)\r\n\r\n            activeEffect.deps.push(dep)\r\n        }\r\n    }\r\n}\r\n\r\nexport function trigger(target: any,type: string,key: string,value: any,oldValue: any){\r\n    const depsMap = targetMap.get(target)\r\n    if(!depsMap){\r\n        return\r\n    }\r\n    let effects = depsMap.get(key)\r\n    if(effects){\r\n        triggerEffect(effects)\r\n    }\r\n} \r\n\r\nexport function triggerEffect(effects:Set<ReactiveEffect>){\r\n    // \u786E\u4FDD\u4E0B\u9762\u7528\u5230\u7684\u662FSet\u6570\u636E\u7ED3\u6784\r\n    effects = new Set(effects)\r\n        effects.forEach((effect:ReactiveEffect)=>{\r\n            if(effect !== activeEffect){\r\n                if(effect.scheduler){ // \u5982\u679C\u7528\u6237\u4F20\u5165\u4E86\u8C03\u5EA6\u51FD\u6570\uFF0C\u6267\u884C\u7528\u6237\u7684\u8C03\u5EA6\u51FD\u6570\r\n                    effect.scheduler()\r\n                }else{\r\n                    effect.run() \r\n                }\r\n               \r\n            }\r\n        })\r\n}", "export { ShapeFlags } from './ShapeFlags'\r\nexport { PatchFlags } from './patchFlags'\r\n\r\nexport function isObject(value:any):boolean{\r\n    return typeof value === 'object' && value !== null;\r\n}\r\n\r\nexport function isFunction(value:any):boolean {\r\n    return typeof value === 'function' \r\n}\r\n\r\nexport function isArray(value:any):boolean {\r\n    return Array.isArray(value)\r\n}\r\n\r\nexport function isString(value:any):boolean {\r\n    return typeof value === 'string'\r\n}\r\n\r\nexport function isNumber(value:any):boolean {\r\n    return typeof value === 'number'\r\n}\r\n\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\nexport const hasOwn = (object: any,key: any)=>{\r\n    return hasOwnProperty.call(object,key)\r\n}\r\n", "import { isObject } from '@vue/shared';\r\nimport { track,trigger} from \"./effect\"\r\nimport {reactive } from './reactive'\r\n\r\nexport const enum ReactiveFlags {\r\n    IS_RECEIVE = '__v_isReactive'\r\n}\r\n\r\nexport const baseHandlers = {\r\n    get(target: object,key: PropertyKey,receiver: any){\r\n        if(key === ReactiveFlags.IS_RECEIVE){\r\n            return true;\r\n        }\r\n        // \u6536\u96C6\u4F9D\u8D56.\r\n        track(target,'get',key)\r\n        // \u89E3\u51B3\u591A\u5C42\u5BF9\u8C61\u4EE3\u7406\uFF0C\u6DF1\u5EA6\u4EE3\u7406\r\n        let result = Reflect.get(target,key,receiver)\r\n        if(isObject(result)){\r\n            return reactive(result)\r\n        }\r\n        return result;\r\n    },\r\n    set(target: any,key: string,value: any,receiver: any){\r\n        // \u62FF\u5230\u65E7\u7684\u503C\r\n        let oldValue = target[key]\r\n        let result = Reflect.set(target,key,value,receiver)\r\n        if(oldValue !== value){\r\n            // \u4E0D\u4E00\u81F4\uFF0C\u66F4\u65B0\r\n            trigger(target,'set',key,value,oldValue)\r\n        }\r\n\r\n        return result;\r\n    }\r\n}", "import { isObject } from \"@vue/shared\";\r\nimport { ReactiveFlags,baseHandlers } from \"./baseHandlers\";\r\n\r\n// \u5B9E\u73B0\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4EE3\u7406\u591A\u6B21\u5C31\u8FD4\u56DE\u540C\u4E00\u4E2A\u4EE3\u7406\r\n// \u4EE3\u7406\u5BF9\u8C61\u518D\u6B21\u88AB\u4EE3\u7406\u65F6\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8FD4\u56DE\r\nexport function isReactive(value: any ){\r\n    return !!(value && value[ReactiveFlags.IS_RECEIVE])\r\n}\r\n\r\n\r\nconst reactiveMap = new WeakMap()\r\n\r\nexport function reactive(target:any):any{\r\n    // console.log(target)\r\n    if(!isObject(target)){\r\n        return\r\n    }\r\n    if(isReactive(target)){\r\n        return target;\r\n    }\r\n    let exisitTarget = reactiveMap.get(target)\r\n    if(exisitTarget){\r\n        return exisitTarget\r\n    }\r\n    const proxy =  new Proxy(target,baseHandlers)\r\n    reactiveMap.set(target,proxy);\r\n    return proxy;\r\n}", "import { ReactiveEffect, triggerEffect,trackEffects } from './effect';\r\nimport { isFunction } from '@vue/shared'\r\n// \u53EA\u8BFB\r\n// const count = ref(1)\r\n// const plusOne = computed(() => count.value + 1)\r\n\r\n// console.log(plusOne.value) // 2\r\n\r\n// plusOne.value++ // \u9519\u8BEF\r\n\r\nclass ComputedRefImpl{\r\n    \r\n    public effect:ReactiveEffect;\r\n    public _dirty: boolean = true; //\u9ED8\u8BA4\u7B2C\u4E00\u6B21\u8C03\u7528\u5C5E\u6027\u7684\u65F6\u5019\u8FDB\u884C\u8BA1\u7B97,\u7528\u6765\u5224\u65AD\u8BE5\u4E0D\u8BE5\u91CD\u65B0\u8BA1\u7B97\uFF0C\u4E3Atrue\u8BF4\u660E\u8FD9\u4E2A\u503C\u662F\u810F\u7684\uFF0C\u8BF4\u660E\u4F9D\u8D56\u7684\u53D8\u91CF\u53D8\u5316\u4E86\uFF0C\u90A3\u4E48\u5C31\u5E94\u8BE5\u91CD\u65B0\u8FD0\u884Ceffect.fun()\r\n    public __v_isReadonly:boolean = true;//\u8BA1\u7B97\u5C5E\u6027\u9ED8\u8BA4\u662F\u53EA\u8BFB\u7684\r\n    public __v_isRef:boolean = true; \r\n    public _value:any = 999;\r\n    public dep!: Set<ReactiveEffect>;\r\n\r\n    constructor(public getter:any,public setter:any){\r\n        // \u5C06\u7528\u6237\u8F93\u5165\u7684getter\u653E\u5230effect\u4E2D\uFF0Cgetter\u51FD\u6570\u8FD4\u56DE\u7ED3\u679C\u7528\u5230\u7684\u53D8\u91CF\u5C31\u4F1A\u88AB\u8FD9\u4E2Aeffect\u6536\u96C6\u8D77\u6765\r\n        //  export let activeEffect:any = undefined\r\n\r\n\r\n        // ....\u521B\u5EFAReactiveEffect\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u5E76\u4E14\u5728\u6784\u9020\u51FD\u6570\u5185\u90E8\u628A \u521B\u9020\u51FA\u6765\u7684 \u5B9E\u4F8B \u8D4B\u503C\u7ED9  activeEffect\r\n\r\n        // this.parent = activeEffect\r\n        // activeEffect = this\r\n        this.effect =  new ReactiveEffect(getter,()=>{\r\n            // \u7A0D\u540E\u6B64\u8BA1\u7B97\u5C5E\u6027 effect \u4F9D\u8D56\u7684\u5C5E\u6027(getter\u91CC\u9762\u7684\u5C5E\u6027)\u53D8\u5316\u4F1A\u4E86 \u5C31\u4F1A\u6267\u884C\u6B64\u8C03\u5EA6\u51FD\u6570\r\n            // scheduler\r\n            // \u53EA\u8981\u89E6\u53D1\u4E86\u8FD9\u4E2A\u51FD\u6570\u8BF4\u660E\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684\u503C\u53D1\u751F\u6539\u53D8\u4E86\r\n            // \u90A3\u4E48\u5C31\u89E3\u9501\uFF0C\u540E\u7EED\u5728\u8C03\u7528 get \u7684\u65F6\u5019\u5C31\u4F1A\u91CD\u65B0\u6267\u884C\uFF0C\u6240\u4EE5\u4F1A\u5F97\u5230\u6700\u65B0\u7684\u503C\r\n\r\n            if(!this._dirty){ // \r\n                this._dirty = true;\r\n                // \u5B9E\u73B0=\u4E00\u4E2A\u89E6\u53D1\u66F4\u65B0\r\n                triggerEffect(this.dep)\r\n            }\r\n        })\r\n    }\r\n    // \u7C7B\u4E2D\u7684\u5C5E\u6027\u8BBF\u95EE\u5668\uFF0C\u5E95\u5C42\u662F Object.defineProperty\r\n    get value(){\r\n        // debugger\r\n        // \u7B2C\u4E00\u6B21\u8FD0\u884C\u8BA1\u7B97\u5C5E\u6027\uFF0C\u53D1\u73B0\u503C\u662F\u810F\u7684\uFF0C\u90A3\u4E48\u5C31\u8FD0\u884Cgetter\uFF0C\u8FD4\u56DE\u7684\u503C\u4FDD\u5B58\u5230\u8BA1\u7B97\u5B9E\u4F8B\u5BF9\u8C61\u7684_value\u4E0A\uFF0C\u7136\u540E\u518D\u7ED9\u7528\u6237\r\n        // \u505A\u4F9D\u8D56\u6536\u96C6\r\n        trackEffects(this.dep || (this.dep = new Set()))\r\n        if(this._dirty){\r\n            // debugger\r\n            this._dirty = false;\r\n            this._value = this.effect?.run();\r\n            // const state = Reactive({count:2,end:999}) // \u8FD9\u4E00\u6B65\uFF0Cstate\u5DF2\u7ECF\u662F\u4E00\u4E2A\u4EE3\u7406\u5BF9\u8C61\u4E86\r\n            // const plusOne = computed(() => state.count + state.end)\r\n            // console.log(plusOne.value) // 1001\r\n            // \u8FD9\u91CC\u5DF2\u7ECF\u6536\u96C6\u4F9D\u8D56\u4E86\uFF0C\u53EA\u8981new ReactiveEffect() \u5C31\u4F1A\u4EA7\u751F\u4E00\u4E2A\r\n        }\r\n        return this._value\r\n    }\r\n    set value(newVal){\r\n        this.setter(newVal)\r\n    }\r\n}\r\n\r\nexport const computed = (getterOrOptions: any)=>{\r\n   \r\n    let onlyGetter = isFunction(getterOrOptions) \r\n    \r\n    let getter:any;\r\n    let setter:any;\r\n\r\n    if(onlyGetter){\r\n        getter = getterOrOptions\r\n        setter = ()=>{ console.warn('no set') }\r\n    }else{\r\n        getter = getterOrOptions.get\r\n        setter = getterOrOptions.set\r\n    }\r\n\r\n    return new ComputedRefImpl(getter, setter)\r\n}", "import { isArray, isObject } from '@vue/shared';\r\nimport { ReactiveEffect, trackEffects, triggerEffect } from './effect';\r\nimport { reactive } from './reactive'\r\n\r\n\r\nfunction toReactive(value: any){\r\n    return isObject(value) ? reactive(value) : value;\r\n}\r\n\r\nclass RefImpl {\r\n    public dep:Set<ReactiveEffect> = new Set();\r\n    public _value:any;\r\n    public __v_isRef:boolean = true;\r\n\r\n    constructor(public rawValue:any){\r\n        this._value = toReactive(rawValue);\r\n    }\r\n\r\n    get value(){\r\n        trackEffects(this.dep)\r\n        return this._value;\r\n    }\r\n    set value(newValue:any){\r\n        if(newValue !== this.rawValue){\r\n            this._value = toReactive(newValue);\r\n            this.rawValue = newValue;\r\n            triggerEffect(this.dep)\r\n        }\r\n    }\r\n}\r\n\r\nclass ObjectRefImpl{\r\n    constructor(public object:any,public key:string){\r\n\r\n    }\r\n    get value(){\r\n        return this.object[this.key]\r\n    }\r\n    set value(newVal){\r\n        this.object[this.key] = newVal\r\n    }\r\n}\r\n\r\nexport function ref(value:any){\r\n    return new RefImpl(value);\r\n\r\n}\r\n\r\nexport function toRef(object: any,key: string){\r\n    return new ObjectRefImpl(object,key)\r\n}\r\n\r\n// \u53EA\u662F\u5C06.value\u5C5E\u6027\u4EE3\u7406\u5230\u539F\u59CB\u7C7B\u578B\u4E0A\uFF0CtoRefs\u53EA\u662F\u505A\u4E86\u4EE3\u7406\uFF0C\u5B9E\u9645\u4E0A\u8FD8\u662F\u8BBF\u95EE\u7684\u539F\u4EE3\u7406\u5BF9\u8C61object\r\nexport function toRefs(object: any){\r\n    const result:any =  isArray(object) ? new Array(object.length) : {};\r\n    \r\n    for(let key in object){\r\n        result[key] = toRef(object,key) \r\n    }\r\n    return result;\r\n\r\n}\r\n\r\nexport function proxyRefs(object:any){\r\n    // debugger\r\n    return new Proxy(object,{\r\n        get(target,key,recevier){\r\n            let result =  Reflect.get(target,key,recevier)\r\n            return result.__v_isRef ? result.value : result\r\n        },\r\n        set(target,key,value,recevier){\r\n            const oldValue = target[key];\r\n            if(oldValue.__v_isRef){\r\n                oldValue.value = value\r\n                return true\r\n            }else{\r\n                return Reflect.set(target,key,value,recevier)\r\n            }\r\n        }\r\n    })\r\n\r\n\r\n}", "import { isObject, isFunction } from '@vue/shared';\r\nimport { ReactiveEffect } from \"./effect\";\r\nimport { isReactive } from \"./reactive\";\r\n\r\n\r\n// let a = {\r\n//     n:'sss'\r\n// }\r\n// let apro = new Proxy(a,{})\r\n// console.log(typeof apro) \u8F93\u51FA----> object\r\n        \r\n\r\n// \u9012\u5F52\u8BBF\u95EE\u5BF9\u8C61\u5C5E\u6027\r\nfunction traversal(value: any,set = new Set()) {//\u8003\u8651\u5982\u679C\u5BF9\u8C61\u4E2D\u662F\u5426\u6709\u5FAA\u73AF\u5F15\u7528\r\n    if(!isObject(value)){ //\u5982\u679C\u4E0D\u662F\u5F15\u7528\u6570\u636E\u7C7B\u578B\r\n        return value\r\n    }\r\n    if(set.has(value)){\r\n        return value\r\n    }\r\n    set.add(value)\r\n    for(let key in value) {\r\n        traversal(value[key],set)\r\n    }\r\n    return value\r\n}\r\n\r\n\r\n// 1. \u7528\u6237\u4F20\u5165\u7684\u5BF9\u8C61 source        cb:callback  \u7528\u6237\u4F20\u5165\u7684\u56DE\u8C03\u51FD\u6570\r\nexport function watch(source: any,cb: any){\r\n    let getter:any;\r\n    // \u5BF9\u7528\u6237\u4F20\u5165\u7684\u6570\u636E\u5BF9\u8C61\u8FDB\u884C\u5FAA\u73AF\uFF0C\u9012\u5F52\u5FAA\u73AF\uFF0C\u53EA\u8981\u5FAA\u73AF\u5C31\u4F1A\u8BBF\u95EE\u5230\u5BF9\u8C61\u4E0A\u9762\u7684\u6BCF\u4E00\u4E2A\u5C5E\u6027\uFF0C\r\n    // \u4ECE\u800C\u8C03\u7528\u5C5E\u6027\u7684get,\u5C31\u4F1A\u6536\u96C6\u5F53\u524D\u5C5E\u6027\u5BF9\u5E94\u7684effect ---> \r\n    // const state = reactive({name:'ddd,age:78})\r\n    // watch(state,()=>{\r\n            \r\n    // })\r\n    // name:[effect1,effect2....],  \r\n    // age:[effect1,effect2....].....\r\n       \r\n    if(isReactive(source)){\r\n        getter = () => traversal(source)\r\n    }else if(isFunction(source)){\r\n        getter = source\r\n    }else{\r\n        return \r\n    }\r\n    let clear:any;\r\n    const onClearup = (fn: any) => {\r\n        clear = fn;\r\n    }\r\n\r\n    let oldValue: any;\r\n    // \u5C5E\u6027\u53D8\u5316\u4E86\uFF0C\u5C31\u4F1A\u8D70 job \u51FD\u6570\r\n    const job = () => {\r\n        if(clear){\r\n            clear();\r\n        }\r\n        const newValue = effect.run() \r\n        cb(newValue,oldValue,onClearup)\r\n        oldValue = newValue\r\n    }\r\n\r\n    const effect = new ReactiveEffect(getter,job);\r\n\r\n    oldValue = effect.run()\r\n\r\n    return effect.run()\r\n\r\n}", "export function getSequence(arr: Array<any>){\r\n        const len = arr.length\r\n        const result = [0]\r\n        const p = new Array(len).fill(0)\r\n        let start;\r\n        let end;\r\n        let middle;\r\n        let resultLastIndex;\r\n        for (let i = 0; i < len; i++) {\r\n            let arrI = arr[i]\r\n            if(arrI !== 0){\r\n                resultLastIndex = result[result.length - 1]\r\n                if(arr[resultLastIndex] < arrI){\r\n                    result.push(i)\r\n                    p[i] = resultLastIndex;\r\n                    continue\r\n                }\r\n                start = 0\r\n                end = result.length - 1\r\n                while (start < end){\r\n                    middle = ((start + end) / 2) | 0\r\n                    if(arr[result[middle]] < arrI){\r\n                        start = middle + 1\r\n                    }else{\r\n                        end = middle\r\n                    }\r\n                }\r\n                if(arr[result[end]] > arrI){\r\n                    result[end] = i\r\n\r\n                    p[i] = result[end - 1]\r\n                }\r\n            } \r\n        }\r\n        let i = result.length\r\n\r\n        let last = result[i - 1]\r\n        while (i-- > 0){ \r\n            result[i] = last\r\n            last = p[last]\r\n\r\n        }\r\n        return result;\r\n    }\r\n    ", "let queue: Array<any>= []\r\nlet isFlushing = false\r\nconst resolvePromise = Promise.resolve()\r\n\r\nexport function queueJob(job: any){\r\n   \r\n    if(!queue.includes(job)){\r\n        queue.push(job)\r\n    } \r\n    if(!isFlushing){\r\n        isFlushing = true\r\n        resolvePromise.then(()=>{\r\n            isFlushing = false\r\n            let copyqueue = queue.slice(0)\r\n            queue.length = 0\r\n            for(let i=0; i< copyqueue.length; i++){\r\n                let job = copyqueue[i]\r\n                job()\r\n            }\r\n            copyqueue.length = 0\r\n        })\r\n    }\r\n\r\n}\r\n", "import { isArray, isNumber, isObject,isString,ShapeFlags } from \"@vue/shared\";\r\n\r\n\r\nexport function isVnode(vnode: any){\r\n    return !!(vnode?.__v_isVnode)\r\n}\r\n\r\nexport function isSameVnode(oldVnode: any, newVnode: any){ //1.\u6807\u7B7E\u540D\u76F8\u540C 2.key\u76F8\u540C\r\n\r\n    return !!((oldVnode.type === newVnode.type) && (oldVnode.key === newVnode.key))\r\n\r\n}\r\n\r\nexport const Text = Symbol(\"Text\");\r\nexport const Fragment = Symbol(\"Fragment\");\r\n\r\n// \u865A\u62DF\u8282\u70B9\u6709\uFF1A \u7EC4\u4EF6\u7C7B\u578B\u3001\u5143\u7D20\u7C7B\u578B\u3001\u6587\u672C\u7C7B\u578B\r\nexport function createVnode(type: any,props?: any,children?: string | Array<any>,patchFlag?: any){\r\n    // 1.\u7C7B\u578B\u662F\u5B57\u7B26\u4E32\u7684\u65F6\u5019\u518D\u5224\u65AD\u662F\u4E0D\u662Fdom\u5143\u7D20\u8282\u70B9\r\n    // ShapeFlags.COMPONENT = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT\r\n    let shapeFlags = \r\n        isString(type) ? ShapeFlags.ELEMENT : \r\n        isObject(type) ? ShapeFlags.STATEFUL_COMPONENT : 0\r\n    let vnode = { // key\u6807\u8BC6\u865A\u62DF\u8282\u70B9\u7684\u7C7B\u578B,\u6BCF\u4E2A\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u4E00\u4E2A\u771F\u5B9E\u8282\u70B9:el\r\n        el:null,\r\n        type,\r\n        props,\r\n        children,\r\n        key: props?.['key'],\r\n        __v_isVnode: true,\r\n        component:null,\r\n        shapeFlags,\r\n        patchFlag\r\n    }\r\n    if(children){\r\n        let type:number = 0;\r\n        if(isArray(children)){\r\n            type = ShapeFlags.ARRAY_CHILDREN;\r\n        }else if(isObject(children)){//\u8BF4\u660E\u8FD9\u4E2A\u7EC4\u4EF6\u5E26\u6709\u63D2\u69FD\r\n            type = ShapeFlags.SLOTS_CHILDREN\r\n        }else{\r\n            children = String(children);\r\n            type = ShapeFlags.TEXT_CHILDREN;\r\n        }\r\n        vnode.shapeFlags |= type\r\n    }\r\n    if(currentBlock && vnode.patchFlag){\r\n        currentBlock.push(vnode)\r\n    }\r\n\r\n    return vnode;\r\n}\r\nlet currentBlock: any[] | null = null;\r\n\r\n\r\nexport { createVnode as createElementVnode } \r\n\r\nexport function openBlock(){  // \u7528\u4E00\u4E2A\u6570\u7EC4\u6536\u96C6\u591A\u4E2A\u52A8\u6001\u8282\u70B9\r\n    currentBlock = []\r\n}\r\n\r\nexport function createElementBlock(type: any,props?: any,children?: string | Array<any>,patchFlag?: undefined){\r\n    return setupBlock(createVnode(type,props,children,patchFlag)) \r\n}\r\n\r\nfunction setupBlock(vnode: any){\r\n    vnode.dynamicChildren = currentBlock;\r\n    currentBlock = null;\r\n    return vnode;\r\n}\r\n\r\n// export function _createElementVnode(){\r\n\r\n// }\r\n\r\nexport function toDisplayString(value:any){\r\n    return isString(value) ? value : value === null ? '' : isObject(value) ? JSON.stringify(value) : String(value)\r\n\r\n}\r\n\r\n", "import { reactive } from \"@vue/reactivity\";\r\nimport { hasOwn } from \"@vue/shared\";\r\n\r\nexport function initProps(instance:any,rawProps:any){\r\n    // debugger\r\n    const props:any = {}\r\n    const attrs:any = {}\r\n    // \u7528\u6237\u58F0\u660E\u8FC7\u7684props\u914D\u7F6E\u9879\r\n    const options = instance.propsOptions || {}\r\n    if(rawProps){\r\n        \r\n        for(let key in rawProps){\r\n            const value = rawProps[key]\r\n            if(hasOwn(options,key)){\r\n                props[key] = value\r\n            }else{\r\n                attrs[key] = value\r\n            }\r\n        }\r\n    }\r\n    // \u8FD9\u91CC\u7684props\u4E0D\u5E0C\u671B\u7EC4\u4EF6\u5185\u90E8\u88AB\u66F4\u6539\uFF0C\u4F46\u662Fprops\u662F\u54CD\u5E94\u5F0F\u7684\uFF0C\u540E\u7EED\u5C5E\u6027\u53D8\u5316\u4E86\uFF0C\u8981\u66F4\u65B0\u89C6\u56FE\uFF0C\u6240\u4EE5\u5E94\u8BE5\u7528\u6D45\u5C42reactive---> shallowReactive\r\n    instance.props = reactive(props)\r\n    instance.attrs = attrs\r\n}\r\n\r\nexport function hasPropsChanged(oldProps: any = {},newProps: any = {}){\r\n    const nextKeys = Object.keys(newProps)\r\n    // 1.\u6BD4\u4E2A\u6570\r\n    if(nextKeys.length !== Object.keys(oldProps).length){ //\u8BF4\u660E\u8981\u66F4\u65B0\r\n        return true\r\n    }\r\n    // 2.\u6BD4\u5BF9\u5C5E\u6027\u503C\u662F\u5426\u4E00\u81F4\r\n    for(let i = 0;i < nextKeys.length;i++){\r\n        const key = nextKeys[i]\r\n        if(newProps[key] !== oldProps[key]){\r\n            return true\r\n        }\r\n    }\r\n    // props:{a:{aaa:'sssss'}} ---- > props:{a:{aaa:'6666'}}\r\n    return false\r\n\r\n}\r\n// \u4EE3\u7406\u7684\u539F\u5BF9\u8C61\u53D8\u5316\u4E86\uFF0C\u90A3\u4E48Proxy\u4E5F\u4F1A\u53D8\u5316\r\nexport function updateProps(oldProps: any,newProps: any) {\r\n    // \u770B\u4E00\u4E0B\u5C5E\u6027\u6709\u6CA1\u6709\u53D8\u5316\uFF0C1.\u503C\u7684\u53D8\u5316 2.\u5C5E\u6027\u7684\u4E2A\u6570\r\n    for(const key in newProps){\r\n        oldProps[key] = newProps[key]\r\n    }\r\n    for(const key in oldProps){\r\n        if(!hasOwn(newProps,key)){\r\n            delete oldProps[key]\r\n        }\r\n    }\r\n}\r\n        // let obj = {\r\n        //     name:'444'\r\n        // }\r\n\r\n        // let props = new Proxy(obj,{\r\n        //     get(target,key){\r\n        //         return target[key]\r\n        //     },\r\n        //     set(target,key,value){\r\n        //         target[key] = value\r\n        //         return true\r\n        //     }\r\n        // })\r\n        // console.log(props.name) // 444\r\n\r\n        // setTimeout(()=>{\r\n        //     obj.name = \"8888\"\r\n        // },3000)\r\n\r\n\r\n        // setTimeout(()=>{\r\n        //     console.log(props.name) //8888\r\n        // },6000)\r\n", "import { ShapeFlags } from '@vue/shared';\r\nimport { Iinstance } from \"./component\";\r\n\r\n\r\n\r\nexport function initSlots(instance: Iinstance,children: any){\r\n    if(instance.vnode.shapeFlags & ShapeFlags.SLOTS_CHILDREN){\r\n        instance.slots = children\r\n    }\r\n}", "import { reactive } from '@vue/reactivity';\r\nimport { hasOwn, isFunction, isObject } from \"@vue/shared\"\r\nimport { proxyRefs } from 'packages/reactivity/src/ref';\r\nimport { initProps } from \"./componentProps\"\r\nimport { initSlots } from './componentSlots';\r\n\r\nexport let currentInstance:any = null;\r\nexport const setCurrentInstance = (instance:any) => {currentInstance = instance}\r\nexport const getCurrentInstance = () => {return currentInstance}\r\n\r\nconst publicPropertyMap:any = {\r\n    // \u5F53\u7528\u6237\u8C03\u7528 instance.proxy.$emit \u65F6\u5C31\u4F1A\u89E6\u53D1\u8FD9\u4E2A\u51FD\u6570\r\n    // i \u5C31\u662F instance \u7684\u7F29\u5199 \u4E5F\u5C31\u662F\u7EC4\u4EF6\u5B9E\u4F8B\u5BF9\u8C61\r\n        $el: (i:any) => i.vnode.el, // $el \u76F4\u5230\u7EC4\u4EF6\u6302\u8F7D\u5B8C\u6210 (mounted) \u4E4B\u524D\u90FD\u4F1A\u662F undefined\r\n        $emit: (i: any) => i.emit,\r\n        $slots: (i: any) => i.slots,\r\n        $props: (i: any) => i.props,\r\n        $attrs:(i: any)=> (i.attrs)\r\n}\r\n\r\nexport interface Iinstance {\r\n    data?:any, //\u5F53\u524D\u7EC4\u4EF6\u7684\u72B6\u6001\r\n    setup?:any,\r\n    setupState?:null,// setup\u51FD\u6570\u7684\u8FD4\u56DE\u7ED3\u679C\r\n    vnode:any, // \u5F53\u524D\u7EC4\u4EF6\u7684\u865A\u62DF\u8282\u70B9\r\n    isMounted:boolean, //\u662F\u5426\u6302\u8F7D\r\n    subTree:any , //\u6E32\u67D3\u7684\u7EC4\u4EF6\u5185\u5BB9\r\n    update:any,\r\n    props?:any,\r\n    attrs?:any,\r\n    render:any,\r\n    propsOptions?:any,\r\n    next?:any,\r\n    proxy:any,\r\n    slots?:any\r\n}\r\n\r\n\r\nexport function createComponenntInstance(vnode:any){\r\n\r\n    const instance:Iinstance = {\r\n        data:null, //\u5F53\u524D\u7EC4\u4EF6\u7684\u72B6\u6001\r\n        setup:null,\r\n        setupState:null,//setup\u7684\u72B6\u6001\r\n        vnode, // \u5F53\u524D\u7EC4\u4EF6\u7684\u865A\u62DF\u8282\u70B9\r\n        isMounted: false, //\u662F\u5426\u6302\u8F7D\r\n        subTree:null , //\u6E32\u67D3\u7684\u7EC4\u4EF6\u5185\u5BB9\r\n        update:null,\r\n        props:{},\r\n        attrs:{},\r\n        render:null,\r\n        propsOptions:vnode.type.props,\r\n        proxy:Proxy\r\n    }\r\n    return instance\r\n}\r\n\r\nconst publicInstanceProxy = {\r\n    get(target:any,key:string){\r\n        // \u4F18\u5148\u7EA7,\u5982\u679Cdata,props,setup\u90FD\u6709\u4E00\u4E2A\u540C\u540D\u5C5E\u6027,setup\u8FD4\u56DE\u7684\u8BE5\u5C5E\u6027\u4F18\u5148\u7EA7\u6700\u9AD8\r\n        if (key[0] !== \"$\") {\r\n            // \u8BF4\u660E\u4E0D\u662F\u8BBF\u95EE public api\r\n            // \u5148\u68C0\u6D4B\u8BBF\u95EE\u7684 key \u662F\u5426\u5B58\u5728\u4E8E setupState \u4E2D, \u662F\u7684\u8BDD\u76F4\u63A5\u8FD4\u56DE\r\n            const {data,props,setupState} = target;\r\n            if(hasOwn(setupState,key)){\r\n                return setupState[key];\r\n            }else if(data && hasOwn(data,key)){\r\n                return data[key];\r\n            }\r\n            else if(props && hasOwn(props,key)){\r\n                return props[key];\r\n            }\r\n        }\r\n        const getter = publicPropertyMap[key]\r\n        if(getter){\r\n            return getter(target)\r\n        }\r\n    },\r\n    set(target:any,key:any,value:any){\r\n        const {data,props,setupState} = target;\r\n        if(hasOwn(setupState,key)){\r\n            setupState[key] = value\r\n            return true\r\n        }else if(data && hasOwn(data,key)){\r\n            data[key] = value;\r\n            return true\r\n        }\r\n        else if(props && hasOwn(props,key)){\r\n            console.warn('\u4E0D\u80FD\u4FEE\u6539props!!!' + ' key ---->  ' +(key as String))\r\n            return false;\r\n        }\r\n        return true\r\n    }\r\n}\r\n\r\nexport function setupComponent(instance:Iinstance){\r\n    // \u521D\u59CB\u5316\u5C5E\u6027\r\n    // type \u7528\u6237\u4F20\u5165\u7684\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u5BF9\u8C61\u5305\u542B \uFF0Cdata,setup,props,methods,render...\r\n    let { props,type,children } = instance.vnode\r\n    initProps(instance,props)//\u521D\u59CB\u5316props\u5C5E\u6027\r\n    initSlots(instance,children)//\u521D\u59CB\u5316slot\u63D2\u69FD\r\n    // \u63D2\u69FD\u7684\u539F\u7406\uFF0C\u8C03\u7528\u7236\u7EC4\u4EF6\u4F20\u8FC7\u6765\u7684 \u51FD\u6570 \uFF0C\u8C03\u7528\uFF0C\u4EA7\u751F \u865A\u62DF dom \u8FDB\u884C\u66FF\u6362\r\n\r\n    // \u521B\u5EFA\u5B9E\u4F8B\u7684\u4EE3\u7406\u5BF9\u8C61\r\n    instance.proxy = new Proxy(instance,publicInstanceProxy)\r\n\r\n    const data =  type.data\r\n    if(data){\r\n        if(!isFunction(data)) return console.warn('data option must be a function')\r\n        //  debugger\r\n        instance.data = reactive(data.call(instance.proxy))\r\n    }\r\n    const setup = type.setup\r\n    if(setup){\r\n        const setupContext = {\r\n            emit:(event: any,...args: any)=>{\r\n                const eventName = `on${event[0].toUpperCase() + event.slice(1)}`\r\n                // \u627E\u5230\u865A\u62DF\u7236\u8282\u70B9\u5B58\u653E\u7684props\u91CC\u9762\u5BF9\u5E94\u7684\u4E8B\u4EF6\uFF0C\u5E76\u4E14\u89E6\u53D1\r\n                // return ()=>{\r\n                //     return h('h',{onClick:() => emit('xxx','ok')},['hello  ',age.value]) --> \u5B50\r\n                // }\r\n                // render(h(VueComp,{onXxx:(value)=>alert(value)}),app) --> \u7236\r\n                const hander =  instance.vnode.props[eventName]\r\n                hander && hander(...args)\r\n            },\r\n\r\n        }\r\n        setCurrentInstance(instance)\r\n        const setupResult = setup(instance.props,setupContext)\r\n        setCurrentInstance(null)\r\n        if(isFunction(setupResult)){\r\n            instance.render = setupResult\r\n        }else if(isObject(setupResult)){\r\n            // \u5BF9\u5185\u90E8\u7684ref \u53D6\u6D88.value\r\n            instance.setupState = proxyRefs(setupResult)\r\n        }\r\n    }\r\n    if(!instance.render){\r\n        instance.render = type.render\r\n    }\r\n\r\n// \u8FD9\u4E2A\u51FD\u6570\u7684\u4E3B\u8981\u4F5C\u7528\u5C31\u662F\uFF0C\u521D\u6B21\u6302\u8F7D\u7684\u65F6\u5019\uFF0C\u6536\u96C6\u4F9D\u8D56\r\n//  const setupRenderEffect = (instance: any,container: any,anchor: any)=> {}\r\n//  const { render } = instance\r\n// render\u51FD\u6570 \u4FDD\u5B58\u5230\u5B9E\u4F8B\u4E0A\u9762\uFF0C\u540E\u9762\u4F1A\u7528\u5230\r\n// instance.render = type.render\r\n\r\n}\r\n// \u63D2\u69FD\u5B9E\u4F8B\u4EE3\u7801\r\n// const VueComp = {\r\n//     props:{\r\n//         name:String\r\n//     },\r\n//     setup(props,{emit}) {\r\n//         const age = ref('4444')\r\n//         setTimeout(() =>{\r\n//             age.value++\r\n//         },3000)\r\n//     },\r\n//     render(){\r\n//         return h(Fragment,{onClick:() => emit('xxx','ok')},[\r\n//                 h('div',this.$slots.hhh())\r\n//        ])\r\n//     }\r\n// }\r\n// render(h(VueComp,null,{\r\n//     hhh:()=> h('h1','ok')\r\n// }),app)\r\n\r\n", "import { ReactiveEffect } from '@vue/reactivity';\r\nimport { isString,isNumber} from '@vue/shared';\r\nimport { ShapeFlags,PatchFlags} from '@vue/shared';\r\nimport { getSequence } from './sequence';\r\nimport { queueJob} from './scheduler';\r\nimport { Text, createVnode, isSameVnode, Fragment } from './vnode';\r\nimport { updateProps ,hasPropsChanged} from './componentProps';\r\nimport { createComponenntInstance, Iinstance, setupComponent } from './component';\r\n\r\n\r\n// import { Iinstance } from './component';\r\nexport function createRenderer(renderOptions: any){\r\n    const {\r\n        insert:hostInsert,\r\n        remove:hostRemove,\r\n        setElementText:hostSetElementText,\r\n        setText:hostSetText,\r\n        querySelector:hostQuerySelector,\r\n        parentNode:hostParentNode,\r\n        nextSibling:hostNextSibling,\r\n        createElement:hostCreateElement,\r\n        createText:hostCreateText,\r\n        patchProp:hostPatchProp\r\n    } = renderOptions\r\n    // \u6BD4\u8F83\u65B0\u65E7\u8282\u70B9\u7684\u5C5E\u6027\r\n    const patchProps = (oldProps: any, newProps: any, el: any) => {\r\n        // \u65B0\u7684\u91CC\u9762\u6709\uFF0C\u76F4\u63A5\u7528\u65B0\u7684\u865A\u62DFdom\u4E0A\u9762\u7684\u5C5E\u6027\r\n        for(let key in newProps){\r\n            hostPatchProp(el,key,oldProps[key],newProps[key] )\r\n        }\r\n        // \u8001\u7684\u6709\uFF0C\u65B0\u7684\u6CA1\u6709\uFF0C\u5C31\u79FB\u9664\u6389\u65E7\u7684\r\n        for(let key in oldProps){\r\n            if(newProps[key] == null){\r\n                // debugger\r\n                hostPatchProp(el,key,oldProps[key],undefined)\r\n            }\r\n        }\r\n    }\r\n    // h('div', { oid:'oldid'},'\u65E7\u8282\u70B9') ---> oldVnode\r\n    // h('div', { id: 'newid' }, '\u65B0\u8282\u70B9') ----> newVnode\r\n    // \u88AB\u6E32\u67D3\u6210\u5982\u4E0B\u7684\u771F\u5B9Edom\r\n    // <div oid=\"oldid\">\r\n    //     \u65E7\u8282\u70B9\r\n    // </div>\r\n\r\n    // <div id=\"newid\">\r\n    //     \u65B0\u8282\u70B9\r\n    // </div>\r\n\r\n    //  let el = newVnode.el = oldVnode.el\r\n    // diff\u7B97\u6CD5\u90E8\u5206\r\n    const patchKeyedChildren = (c1: any, c2: any, el:any) => {\r\n        // debugger\r\n        let i = 0;\r\n        let e1 = c1.length - 1;\r\n        let e2 = c2.length - 1;\r\n        //\u4ECE\u524D\u5F80\u540E\uFF0C\u9047\u5230\u4E0D\u540C\u7684\u5C31\u8DF3\u51FA\r\n        while(i <= e1 && i <= e2){//\u6709\u4EFB\u4F55\u4E00\u65B9\u505C\u6B62\u5FAA\u73AF\u5C31\u8DF3\u51FA\r\n            const vnode1 = c1[i];\r\n            const vnode2 = c2[i];\r\n            if(isSameVnode(vnode1, vnode2)){\r\n                patch(vnode1,vnode2,el) //\u6BD4\u8F83\u4E24\u4E2A\u8282\u70B9\u7684\u5C5E\u6027\u548C\u5B50\u8282\u70B9\r\n            }else{\r\n                break;\r\n            }\r\n            i += 1;\r\n        }\r\n        // \u4ECE\u540E\u5F80\u524D\r\n        while(i <= e1 && i <= e2){\r\n            const vnode1 = c1[e1];\r\n            const vnode2 = c2[e2];\r\n            if(isSameVnode(vnode1, vnode2)){\r\n                patch(vnode1,vnode2,el) //\u6BD4\u8F83\u4E24\u4E2A\u8282\u70B9\u7684\u5C5E\u6027\u548C\u5B50\u8282\u70B9\r\n            }else{\r\n                break;\r\n            }\r\n            e1 -= 1;\r\n            e2 -= 1;\r\n        }\r\n        // i > e1 \u8BF4\u660E\u6709\u65B0\u589E\u7684\r\n        // i \u548C e2 \u4E4B\u95F4\u7684\u662F\u65B0\u589E\u52A0\u7684\u8282\u70B9\r\n        if(i > e1){\r\n            if(i <= e2){\r\n                while(i <= e2){\r\n                    const nextPosition = e2 + 1\r\n                    // \u6839\u636E\u4E0B\u4E00\u4E2A\u8282\u70B9\u7684\u7D22\u5F15\u6765\u770B\u53C2\u7167\u7269\uFF0C\u4E0B\u4E00\u4E2A\u6709\u8282\u70B9\u5C31\u5F80\u524D\u63D2\u5165\uFF0C\u6CA1\u6709\u5C31\u5F80\u540E\u63D2\u5165\r\n                    const anchor = nextPosition < c2.length ? c2[nextPosition].el : null\r\n                    patch(null,c2[i],el,anchor)//\u521B\u5EFA\u65B0\u8282\u70B9\uFF0C\u6254\u5230\u5BB9\u5668  el \u4E2D\r\n                    i++\r\n                }\r\n            }\r\n        // \u5378\u8F7D\r\n        }else if(i > e2){\r\n            if(i <= e1){\r\n                while(i <= e1){\r\n                    unmount(c1[i])\r\n                    i += 1\r\n                }\r\n            }\r\n        }\r\n\r\n        // \u4E71\u5E8F\u5BF9\u6BD4\r\n        let s1 = i\r\n        let s2 = i\r\n        const keyToNewIndexMap = new Map()\r\n        for(let i = s2; i <= e2; i++){\r\n            keyToNewIndexMap.set(c2[i]?.key,i)\r\n        }\r\n        // \u5FAA\u73AF\u65E7\u8282\u70B9\uFF0C\u770B\u4E00\u4E0B\u65B0\u7684\u91CC\u9762\u6709\u6CA1\u6709\uFF0C\u5982\u679C\u6709\uFF0C\u5219\u8981\u6BD4\u8F83\u5DEE\u5F02\uFF0C\u6CA1\u6709\u8981\u6DFB\u52A0\u5230\u5217\u8868\u4E2D\uFF0C\u8001\u7684\u6709\uFF0C\u65B0\u7684\u6CA1\u6709\u5C31\u8981\u5220\u6389\r\n        const toBePatch = e2 - s2 + 1 // \u65B0\u8282\u70B9\u7684\u603B\u4E2A\u6570\uFF0C\u4ECE\u540E\u5F80\u524D\u63D2\u5165\r\n        const newIndexToOldIndexMap = new Array(toBePatch).fill(0) // \u8BB0\u5F55\u662F\u5426\u6BD4\u5BF9\u8FC7\u7684\u6620\u5C04\u8868\r\n\r\n        for(let i = s1; i <= e1; i++){\r\n            const oldChildVnode = c1[i]\r\n            let newIndex =  keyToNewIndexMap.get(oldChildVnode?.key)\r\n            if(newIndex == undefined){ // \u65B0\u7684\u6CA1\u6709\uFF0C\u8001\u7684\u6709\uFF0C\u5378\u8F7D\r\n                unmount(oldChildVnode)\r\n            }else{ //\u5982\u679C\u90FD\u6709\uFF0C\u5C31\u6BD4\u8F83\u5DEE\u5F02\r\n                // \u65B0\u7684\u8282\u70B9\u4F4D\u7F6E \u5BF9\u5E94\u7740  \u8001\u7684\u8282\u70B9\u4E14patch\u8FC7\u7684\u4F4D\u7F6E\uFF0C\u4E0D\u5305\u62EC\u8001\u7684\u8282\u70B9\u6CA1\u6709\uFF0C\u65B0\u7684\u8282\u70B9\u6709\u7684\u60C5\u51B5\r\n                newIndexToOldIndexMap[newIndex - s2] = i + 1; // \u6807\u8BB0\u5F53\u524Dpatch\u8FC7\u7684\u4F4D\u7F6E\r\n                patch(oldChildVnode,c2[newIndex],el)\r\n            }\r\n        }\r\n        // \u9700\u8981\u79FB\u52A8\u4F4D\u7F6E\r\n        // \u83B7\u53D6\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\r\n        let incrementArr =  getSequence(newIndexToOldIndexMap)\r\n        // \u9012\u589E\u5B50\u5E8F\u5217\u7684\u6700\u540E\u4E00\u4E2A\u7D22\u5F15 incrementArrEndIndex\r\n        let incrementArrEndIndex = incrementArr.length - 1\r\n        for(let i = toBePatch - 1 ; i >= 0 ; i--){\r\n            let curIndex =  i + s2;\r\n            let current =  c2[curIndex]; \r\n            const anchor = curIndex + 1 < c2.length ? c2[curIndex + 1].el : null;\r\n            //\u53C2\u7167\u7269\u4E3A\u5F53\u524D\u8282\u70B9\u7684\u4E0B\u4E00\u4E2A\u865A\u62DF\u8282\u70B9\u7ED1\u5B9A\u7684 el \uFF0C\u56E0\u4E3A\u662F\u4ECE\u540E\u5F80\u524D\u63D2\u5165\r\n            if(newIndexToOldIndexMap[i] === 0){ //\u8981\u65B0\u521B\u5EFA\u4E00\u4E2A\u8282\u70B9\r\n                patch(null,current,el,anchor)\r\n            }else{// \u8BF4\u660E\u53EF\u4EE5\u590D\u7528\u65E7\u8282\u70B9\uFF0C\u56E0\u4E3A\u65E7\u8282\u70B9\u4E2D\u4E00\u5B9A\u5B58\u5728\u4E0E\u65B0\u8282\u70B9 type \u4E00\u6837\u7684\u8282\u70B9\r\n                if(i != incrementArr[incrementArrEndIndex] ){\r\n                    hostInsert(current.el,el,anchor);\r\n                }else{\r\n                    incrementArrEndIndex -= 1;\r\n                }\r\n            }\r\n            // \u533A\u5206\uFF1A\u54EA\u4E9B\u662F\u65B0\u589E\u52A0\u7684\uFF0C\u65E7\u8282\u70B9\u91CC\u9762\u6CA1\u6709 \uFF0C\u770B\u4E00\u4E0B\u865A\u62DF\u8282\u70B9\u6709\u6CA1\u6709 el\r\n            \r\n            // \u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u5B9E\u73B0\uFF0Cvue2\u6CA1\u6709\u8FD9\u4E2A\u5224\u65AD\u6BD4\u5982  c d e --->  e c d \u5176\u4E2Dc d \u662F\u4E0D\u9700\u8981\u91CD\u65B0\u63D2\u5165\u7684\uFF0C\u628A e \u63D2\u5165\u5230 c \u524D\u9762\u5C31\u884C\u4E86\r\n        }\r\n    }\r\n    /**\r\n     * \u53EA\u6709type\u76F8\u540C\u624D\u4F1A\u5230\u8FD9\u91CC\u6765\u6BD4\u8F83\u6807\u7B7E\u91CC\u9762\u7684\u5185\u5BB9\r\n     * @param oldVnode \r\n     * @param newVnode \r\n     * @param el \u5C31\u662F\u4E0A\u9762\u90A3\u4E2A\u65E7\u8282\u70B9\u6700\u5916\u5C42\u7684div\u5143\u7D20\uFF0C\u4E3A\u4EC0\u4E48\u53D6\u65E7\u7684\u5462\uFF1F\u662F\u4E3A\u4E86\u590D\u7528\uFF0C\u56E0\u4E3A\u6807\u7B7E\u540D\u5DF2\u7ECF\u76F8\u540C\u4E86\uFF0C\u5C31\u6CA1\u6709\u5FC5\u8981\u518D\u53BB\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684div\uFF0C\u76F4\u63A5\u5728\u65E7\u7684\u5143\u7D20\u4E0A\u9762\u4FEE\u6539\u5C31\u884C\u4E86\r\n     */\r\n    const pathChildren = (oldVnode:  any,newVnode: any,el:any) => {\r\n        if(Array.isArray( newVnode.children)){\r\n            for(let i = 0; i < newVnode.children.length; i++) {\r\n            normalLize(newVnode.children,i)// \u5148\u8FDB\u884C\u8F6C\u5316\uFF0C\u5982\u679C\u662F\u5B57\u7B26\u4E32 --> h('h2',{style:{color:'red'}},[h('span',null,'span\u7684\u5185\u5BB9'),'\u6587\u672C\u7C7B\u578B'] \u53D8\u6210 --> h(Text,'\u6587\u672C\u7C7B\u578B')\r\n            }\r\n        }\r\n        // \u6BD4\u8F83\u4E24\u4E2A\u865A\u62DFdom\u7684\u5185\u5BB9\r\n        const c1 = oldVnode && oldVnode.children\r\n        const c2 = newVnode && newVnode.children \r\n        const prevShapeFlags = oldVnode.shapeFlags // \u4E4B\u524D\u7684\u7C7B\u578B\r\n        const currShapeFlags = newVnode.shapeFlags // \u65B0\u7684\u7C7B\u578B\r\n//  console.log(c1,c2)\r\n        /**\r\n         * // children\u53EF\u80FD\u662F\u7A7A\u7684\uFF0C\u53EF\u80FD\u662F\u6587\u672C\uFF0C\u4E5F\u53EF\u80FD\u662F\u4E00\u4E2A\u6570\u7EC4\r\n         * \u7A7A\uFF1Ah('div', { oid:'oldid'})\r\n         * \u6587\u672C\uFF1Ah('div', { oid:'oldid'},'\u6587\u672C\u5185\u5BB9')\r\n         * \u6570\u7EC4\uFF1Ah('div', { oid:'oldid'},[h('div',null,'\u54C8\u54C8\u54C8'),'\u6211\u662F\u5185\u5BB9'])\r\n         * \u65E7\u7684children  \u65B0\u7684children\r\n         * \r\n         * \u6570\u7EC4          \u6587\u672C     ---> \u5220\u9664\u65E7\u7684children,\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\r\n         * \u6587\u672C          \u6587\u672C     ---> \u66F4\u65B0\u6587\u672C\u5373\u53EF\r\n         * \u7A7A            \u6587\u672C     ---> \u66F4\u65B0\u6587\u672C\u5373\u53EF\r\n         * \u6570\u7EC4          \u6570\u7EC4     ---> diff\u7B97\u6CD5 ---> \u91CD\u70B9\r\n         * \u6587\u672C          \u6570\u7EC4     ---> \u6E05\u7A7A\u6587\u672C\uFF0C\u8FDB\u884C\u6302\u8F7D\r\n         * \u7A7A            \u6570\u7EC4     ---> \u8FDB\u884C\u6302\u8F7D\r\n         * \u6570\u7EC4          \u7A7A       ---> \u5220\u9664\u6240\u6709children\r\n         * \u6587\u672C          \u7A7A       ---> \u6E05\u7A7A\u6587\u672C\r\n         * \u7A7A            \u7A7A       ---> \u65E0\u9700\u5904\u7406  \r\n         */\r\n        // \u73B0\u5728\u662F\u6587\u672C\r\n        if(currShapeFlags & ShapeFlags.TEXT_CHILDREN){\r\n            // console.log(oldVnode,newVnode)\r\n            // 1.\u6570\u7EC4          \u6587\u672C     ---> \u5220\u9664\u65E7\u7684children,\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\r\n            if(prevShapeFlags & ShapeFlags.ARRAY_CHILDREN){ // \u6570\u7EC4  \u6587\u672C\r\n                // \u5220\u9664\u6240\u6709\u65E7\u7684\u5B50\u8282\u70B9\r\n                unmountChildren(c1)\r\n            }\r\n            // 2.\u6587\u672C    \u6587\u672C     ---> \u66F4\u65B0\u6587\u672C\u5373\u53EF + 3.\u7A7A       \u6587\u672C     ---> \u66F4\u65B0\u6587\u672C\u5373\u53EF\r\n            if(c1 !== c2){\r\n                hostSetElementText(el,c2)\r\n            }\r\n        }else{\r\n            // \u4E4B\u524D\u662F\u6570\u7EC4\r\n            if(prevShapeFlags & ShapeFlags.ARRAY_CHILDREN){\r\n                // 4.\u6570\u7EC4          \u6570\u7EC4     ---> \u4E4B\u524D\u662F\u6570\u7EC4\uFF0C\u73B0\u5728\u4E5F\u662F\u6570\u7EC4  diff\u7B97\u6CD5 ---> \u91CD\u70B9 \r\n                if(currShapeFlags & ShapeFlags.ARRAY_CHILDREN){\r\n                // diff\u7B97\u6CD5\r\n                patchKeyedChildren(c1,c2,el)\r\n                // 5.\u6587\u672C/\u7A7A          \u6570\u7EC4     ---> \u4E4B\u524D\u662F\u6570\u7EC4\uFF0C\u73B0\u5728\u4E0D\u662F\u6570\u7EC4 \u6587\u672C/\u7A7A \uFF0C\u5220\u9664\u4EE5\u524D\u7684\r\n                }else{\r\n                    unmountChildren(c1)\r\n                    hostSetElementText(el,c2)\r\n                }\r\n            }else{\r\n                if(prevShapeFlags & ShapeFlags.TEXT_CHILDREN){\r\n                    hostSetElementText(el,'')\r\n                }\r\n                if(currShapeFlags & ShapeFlags.ARRAY_CHILDREN){\r\n                    mountChildren(c2,el)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    const patchBlockChildren = (oldVnode:  any,newVnode: any) => {\r\n        // debugger\r\n        for(let i = 0 ; i < newVnode.dynamicChildren.length; i++){\r\n            patchElement(oldVnode.dynamicChildren[i],newVnode.dynamicChildren[i])\r\n        }\r\n    }\r\n    // \u6BD4\u8F83\u865A\u62DFdom\r\n    const patchElement = (oldVnode: any, newVnode: any) => {\r\n        let el = newVnode.el = oldVnode.el\r\n        let oldProps = oldVnode.props || {}\r\n        let newProps = newVnode.props || {}\r\n        \r\n        let { patchFlag }  = newVnode\r\n\r\n        if(patchFlag & PatchFlags.CLASS){\r\n            if(oldVnode.class !== newVnode.class){\r\n                hostPatchProp(el,'class',null,newVnode.class)\r\n            }\r\n        }else{\r\n            // \u6BD4\u8F83\u5B8C\u5C5E\u6027\u6BD4\u513F\u5B50\u5143\u7D20\r\n            patchProps(oldProps,newProps,el)\r\n        }\r\n\r\n\r\n        if(newVnode.dynamicChildren > 0){// \u6570\u7EC4\u7684\u6BD4\u8F83\r\n            patchBlockChildren(oldVnode,newVnode)\r\n        }else{// \u6811\u7684\u9012\u5F52\u6BD4\u8F83\r\n            pathChildren(oldVnode,newVnode,el)\r\n        }\r\n    }\r\n    const processText = (oldVnode: any, newVnode: any,container: any) => {\r\n        if(oldVnode == null){ //\u521D\u6B21\u6E32\u67D3\r\n            // \u521B\u5EFA\u4E00\u4E2A\u6587\u672C\u8282\u70B9\u5C06\u5176\u63D2\u5165\u8FDB\u76EE\u6807\u8282\u70B9\r\n            hostInsert((newVnode.el =  hostCreateText(newVnode.children)),container)\r\n        }else{// \u66F4\u65B0\uFF0C\u590D\u7528\uFF0C\u6587\u672C\u5185\u5BB9\u53D8\u5316\u4E86\uFF0C\u590D\u7528\u8001\u7684\u8282\u70B9\r\n            const el = newVnode.el = oldVnode.el\r\n            if(oldVnode.children !== newVnode.children){\r\n                hostSetText(el,newVnode.children)// \u6587\u672C\u7684\u66F4\u65B0\r\n            }\r\n        }\r\n    }\r\n    const processFragment = (oldVnode: any, newVnode: any,container: any,anchor: any = null)=> {\r\n        // debugger\r\n        if(oldVnode == null){\r\n            mountChildren(newVnode.children,container)\r\n        }else{\r\n            pathChildren(oldVnode,newVnode,container)// \u8D70\u7684 diff\u7B97\u6CD5\r\n        }\r\n\r\n    }\r\n    // type\u76F8\u540C\u624D\u4F1A\u8D70\u5230\u8FD9\u4E00\u6B65\uFF0C\u4E5F\u5C31\u662F\u76F8\u540C\u7684\u6807\u7B7E\u6216\u8005\u7EC4\u4EF6\u624D\u8FDB\u884C\u5BF9\u6BD4\r\n    const processElement = (oldVnode: any, newVnode: any, container: any,anchor: any = null) => {\r\n        if(oldVnode == null){ //\u521D\u6B21\u6302\u8F7D\r\n            mountElement(newVnode,container,anchor)\r\n        }else{ //\u66F4\u65B0\r\n            //1.\u65B0\u8001\u8282\u70B9\u5B8C\u5168\u6CA1\u5173\u7CFB\uFF0C\u5220\u6389\u65E7\u7684\uFF0C\u6DFB\u52A0\u65B0\u7684\r\n            //2.\u8001\u7684\u548C\u65B0\u7684\u4E00\u6837\uFF0C\u590D\u7528\uFF0C\u5C5E\u6027\u53EF\u80FD\u4E0D\u4E00\u6837\uFF0C\u518D\u5BF9\u6BD4\u5C5E\u6027\uFF0C\u66F4\u65B0\u5C5E\u6027\r\n            //3.\u5BF9\u6BD4\u513F\u5B50\u8282\u70B9\r\n            patchElement(oldVnode,newVnode)\r\n        }\r\n    }\r\n    // \r\n    const updateComponentPreRender = (instance: any,next: any) => {\r\n        instance.next = null //next\u6E05\u7A7A\r\n        instance.vnode = next // \u5B9E\u4F8B\u4E0A\u6700\u65B0\u7684\u865A\u62DF\u8282\u70B9\r\n        // next\u662F\u65B0\u7684\u865A\u62DF\u8282\u70B9 instance.next = newVnode //\u5C06\u65B0\u7684\u865A\u62DF\u8282\u70B9\u653E\u5230 next\u5C5E\u6027\u4E0A\u9762\r\n        // \u65B0\u7684props\u53BB\u66FF\u6362\u8001\u7684\r\n        updateProps(instance.props,next.props);\r\n\r\n    }\r\n    const invokerLifeCycleHooks = (hooks: any) => {\r\n        for(let i = 0; i < hooks.length; i++){\r\n            hooks[i]()\r\n        }\r\n    }\r\n    // \u8FD9\u4E2A\u51FD\u6570\u7684\u4E3B\u8981\u4F5C\u7528\u5C31\u662F\uFF0C\u521D\u6B21\u6302\u8F7D\u7684\u65F6\u5019\uFF0C\u6536\u96C6\u4F9D\u8D56\r\n    const setupRenderEffect = (instance: any,container: any,anchor: any)=> {\r\n        const { render } = instance\r\n        // \u8FD9\u91CC\u5C31\u6302\u8F7D\u7684\u65F6\u5019\u6267\u884C\u4E00\u6B21\r\n        // console.log(\"setupRenderEffect\u5C31\u6302\u8F7D(mounted)\u7684\u65F6\u5019\u6267\u884C\u4E00\u6B21\")\r\n        // console.log(\"componentUpdateFn\u51FD\u6570\u624D\u662F\u66F4\u65B0\u7684\u91CD\u70B9\")\r\n\r\n        // \u4E0B\u9762\u8FD9\u4E2A\u66F4\u65B0\u51FD\u6570\u662F\u91CD\u70B9\uFF0C\u6302\u8F7D\u548C\u66F4\u65B0\u90FD\u4F1A\u8D70\u5230\u8FD9\u91CC\u6765\uFF0C\u53EA\u662F\u6302\u8F7D\u7684\u65F6\u5019\u4F1A\u5148\u6536\u96C6\u4F9D\u8D56\uFF0C\r\n        // \u8C03\u7528reander\u51FD\u6570\u7684\u65F6\u5019\uFF0C\u4E4B\u524Dreactive\u7684\u4EE3\u7406\u5BF9\u8C61\u5C31\u4F1A\u5F00\u59CB\u6536\u96C6render\u51FD\u6570\u91CC\u9762\u7528\u5230\u7684\r\n        // \u5C5E\u6027 \u548C \u5F53\u524Drender\u51FD\u6570\u4E4B\u524D\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u4E0B\u9762\u505A\u4E86\u4E00\u4E2A\u4F18\u5316\uFF0C\u5F53\u6240\u6709\u7684\u540C\u6B65\u4EFB\u52A1\uFF0C\u4E5F\u5C31\u662F\u7EC4\u4EF6\u72B6\u6001\uFF08data,props...\uFF09\r\n        // \u90FD\u66F4\u65B0\u73A9\u518D\u8C03\u7528 \u4E00\u6B21 componentUpdateFn \u89E6\u53D1\u66F4\u65B0\r\n        const componentUpdateFn = ()=> {\r\n            if(!instance.isMounted) { // \u521D\u59CB\u5316\r\n                const { bm ,m } = instance\r\n                // console.log(\" // \u521D\u59CB\u5316\")\r\n                //\u8C03\u7528render\u51FD\u6570\u5E72\u7684\u4E24\u4EF6\u4E8B  1.\u5F97\u5230\u865A\u62DFdom 2.\u6536\u96C6\u4F9D\u8D56\r\n                \r\n                const subTree = render.call(instance.proxy,instance.proxy) \r\n                // debugger\r\n                if(bm){\r\n                    invokerLifeCycleHooks(bm)\r\n                }\r\n                patch(null,subTree,container,anchor);\r\n                // <--\u8FD9\u91CC\u4E0D\u786E\u5B9A\u662F\u4E0D\u662F\u8FD9\u6837\u5B50\u5199 -->\r\n                // \u8BBE\u7F6E this.$el\r\n                /**\r\n                * \u4E3A\u4FDD\u6301\u4E00\u81F4\u6027\uFF0C\u6211\u4EEC\u63A8\u8350\u4F7F\u7528\u6A21\u677F ref \u6765\u76F4\u63A5\u8BBF\u95EE\u5143\u7D20\u800C\u4E0D\u662F\u4F9D\u8D56 $el --> <input ref=\"input\"> \r\n                * $el \u76F4\u5230\u7EC4\u4EF6\u6302\u8F7D\u5B8C\u6210 (mounted) \u4E4B\u524D\u90FD\u4F1A\u662F undefined\u3002\r\n                * \u5BF9\u4E8E\u5355\u4E00\u6839\u5143\u7D20\u7684\u7EC4\u4EF6\uFF0C$el \u5C06\u4F1A\u6307\u5411\u8BE5\u6839\u5143\u7D20\u3002\r\n                * \u5BF9\u4E8E\u4EE5\u6587\u672C\u8282\u70B9\u4E3A\u6839\u7684\u7EC4\u4EF6\uFF0C$el \u5C06\u4F1A\u6307\u5411\u8BE5\u6587\u672C\u8282\u70B9\u3002\r\n                * \u5BF9\u4E8E\u4EE5\u591A\u4E2A\u5143\u7D20\u4E3A\u6839\u7684\u7EC4\u4EF6\uFF0C$el \u5C06\u662F\u4E00\u4E2A\u4EC5\u4F5C\u5360\u4F4D\u7B26\u7684 DOM \u8282\u70B9\uFF0CVue \u4F7F\u7528\u5B83\u6765\u8DDF\u8E2A\u7EC4\u4EF6\u5728 DOM \u4E2D\u7684\u4F4D\u7F6E (\u6587\u672C\u8282\u70B9\u6216 SSR \u6FC0\u6D3B\u6A21\u5F0F\u4E0B\u7684\u6CE8\u91CA\u8282\u70B9)\u3002\r\n                */\r\n                instance.vnode.el = container\r\n                // <--\u8FD9\u91CC\u4E0D\u786E\u5B9A\u662F\u4E0D\u662F\u8FD9\u6837\u5B50\u5199 -- >\r\n                if(m){\r\n                    invokerLifeCycleHooks(m)\r\n                }\r\n                // \u521D\u6B21\u6302\u8F7D\u5B8C\u6210\uFF0C\u628A\u5F53\u524D\u865A\u62DF\u8282\u70B9\u4FDD\u5B58\u5728subTree\u4EE5\u4F5C\u4E3A\u4E0B\u4E00\u6B21\u66F4\u65B0 patch \u7684\u8001\u8282\u70B9\r\n                instance.subTree = subTree;\r\n\r\n                instance.isMounted = true;\r\n            }else{\r\n                const { next , bu ,u } = instance\r\n                if(next){\r\n                    // \u66F4\u65B0\u524D\u9700\u8981\u62FF\u5230\u6700\u65B0\u7684\u5C5E\u6027\u8FDB\u884C\u66F4\u65B0\uFF08\u7EC4\u4EF6\u66F4\u65B0\u524D\uFF0C\u9700\u8981\u505A\u7684\u4E8B\u60C5\uFF09\r\n                    // \u8FD9\u91CC\u8FD8\u6CA1\u8FDB\u884C\u66F4\u65B0\uFF0C\u6240\u4EE5\u8FD9\u91CC\u7684 instance \u662F\u6CA1\u66F4\u65B0\u524D\u7684\u8282\u70B9\uFF0C\u4E5F\u5C31\u662F\u65E7\u865A\u62DF\u8282\u70B9\uFF0Cnext\u662F\u65B0\u7684\u865A\u62DF\u8282\u70B9\r\n                    updateComponentPreRender(instance,next)\r\n                }\r\n                // console.log(\" // \u7EC4\u4EF6\u5185\u90E8\u66F4\u65B0\")\r\n                const subTree = render.call(instance.proxy,instance.proxy) //sunTree \u662F render \u51FD\u6570\u91CC\u9762\u7684 h \u51FD\u6570\u8C03\u7528\u7684\u7ED3\u679C\uFF0C\u662F\u4E00\u4E2A\u865A\u62DFdom\r\n                if(bu){\r\n                    invokerLifeCycleHooks(bu)\r\n                }\r\n                patch(instance.subTree,subTree,container,anchor) //\r\n                if(u){\r\n                    invokerLifeCycleHooks(u)\r\n                }\r\n                instance.subTree = subTree\r\n            }\r\n        }\r\n        // scheduler --> \u8C03\u5EA6\u5668 --> \u7531\u7528\u6237\u81EA\u5DF1\u51B3\u5B9A\u5982\u4F55\u66F4\u65B0\r\n        // export function effect(fn: () => any,options:any={}){\r\n        //     // fn\u53EF\u4EE5\u6839\u636E\u72B6\u6001\u53D8\u5316\u81EA\u52A8\u91CD\u65B0\u6267\u884C\uFF0Ceffect\u53EF\u4EE5\u5D4C\u5957\r\n        //     const _effect = new ReactiveEffect(fn,options.scheduler)\r\n        //     _effect.run();//\u9ED8\u8BA4\u5148\u6267\u884C\u4E00\u6B21\r\n\r\n        //     const runner:any = _effect.run.bind(_effect) \r\n        //     runner.effect = _effect\r\n        //     return runner;\r\n        // }\r\n        // \u7EC4\u4EF6\u7684\u5F02\u6B65\u66F4\u65B0\r\n        // activeEffect --> ReactiveEffect \u7684\u5B9E\u4F8B\u5BF9\u8C61 --> \u4E0B\u9762\u7684effect ---> \u884C\u4E3A\r\n        // Set\u96C6\u5408\uFF0C\u6BD4\u5982 name:[effect1,effect2]    effect.deps.push([effect1,effect2])\r\n        // export function trackEffects(dep:Set<ReactiveEffect>){\r\n        //     if(activeEffect){\r\n        //         let shouldTrack = !dep.has(activeEffect)\r\n        //         if(shouldTrack){\r\n        //             dep.add(activeEffect)\r\n        //             activeEffect.deps.push(dep)\r\n        //         }\r\n        //     }\r\n        // }\r\n        // \u8FD9\u91CC\uFF0C\u5C31\u662F\u9875\u9762\u521D\u6B21\u6302\u8F7D\u7684\u65F6\u5019\u4F1A\u8FD0\u884C\u5230\uFF0C\u540E\u9762\u7684\u66F4\u65B0\u64CD\u4F5C\u90FD\u4E0D\u4F1A\u8D70\u5230\u8FD9\u91CC\uFF0C\u8C03\u7528\u7684\u662F\u4E0A\u9762\u7684\u66F4\u65B0\u51FD\u6570   componentUpdateFn\r\n        const effect = new ReactiveEffect(componentUpdateFn,()=>{\r\n            queueJob(instance.update)\r\n        })\r\n        let update =  instance.update =  effect.run.bind(effect)//\u8C03\u7528 effect.run() \u53EF\u4EE5\u8BA9\u7EC4\u4EF6\u5F3A\u5236\u91CD\u65B0\u6E32\u67D3\r\n        // \u9875\u9762\u521D\u59CB\u5316\u7684\u65F6\u5019\u4F1A\u6267\u884C\u4E00\u6B21\uFF0Ceffect.run.bind(effect) \u5C31\u662F\u4E0A\u9762\u4F20\u8FDB\u53BB\u7684\u66F4\u65B0\u51FD\u6570 componentUpdateFn \r\n        update()\r\n    }\r\n    const processComponent = (oldVnode: any, newVnode: any, container: any,anchor: any)=> {\r\n        // console.log(oldVnode,newVnode)\r\n        if(oldVnode == null){\r\n            mountComponent(newVnode,container,anchor)\r\n        }else{\r\n            // \u7EC4\u4EF6\u66F4\u65B0\u9760\u7684\u662F props \u7684\u53D8\u5316\r\n            updateComponent(oldVnode,newVnode)\r\n        }\r\n    }\r\n    const normalLize = (children: any,index: number) => {\r\n        if(isString(children[index]) || isNumber(children[index])) {\r\n            const TEXT_VNODE = createVnode(Text,null,children[index])\r\n                children[index] = TEXT_VNODE\r\n            return TEXT_VNODE\r\n        }\r\n        return children[index]\r\n    }\r\n    const unmount = (vnode:  any) => {\r\n        hostRemove(vnode.el)\r\n    }\r\n    const unmountChildren = (children: any) => {\r\n        for(let i = 0; i < children.length ;i++){\r\n            unmount(children[i])\r\n        }\r\n    }\r\n    const mountChildren = (children: string | any[],container: any) => {\r\n        for(let i = 0; i < children.length; i++) {\r\n            let child =  normalLize(children,i)// \u5148\u8FDB\u884C\u8F6C\u5316\uFF0C\u5982\u679C\u662F\u5B57\u7B26\u4E32 --> h('h2',{style:{color:'red'}},[h('span',null,'span\u7684\u5185\u5BB9'),'\u6587\u672C\u7C7B\u578B'] \u53D8\u6210 --> h(Text,'\u6587\u672C\u7C7B\u578B')\r\n            patch(null,child,container)\r\n        }\r\n    }\r\n    const mountElement = (vnode: any,container: any,anchor: any) => {\r\n        let { type,props,children,shapeFlags } = vnode;\r\n        let el = vnode.el = hostCreateElement(type) // \u5C06\u771F\u5B9E\u5143\u7D20\u6302\u8F7D\u5230\u865A\u62DF\u8282\u70B9\u4E0A,\u65B9\u4FBF\u540E\u7EED\u590D\u7528\u548C\u66F4\u65B0\r\n        if(props){\r\n            for(let key in props){\r\n                hostPatchProp(el,key,null,props[key])\r\n            }\r\n        }\r\n        // \u5904\u7406\u5B50\u8282\u70B9\u548C\u6587\u672C\u5185\u5BB9\r\n        if(shapeFlags & ShapeFlags.TEXT_CHILDREN){ //\u5B50\u5143\u7D20\u662F\u672C\u6587\uFF0C\u76F4\u63A5\u6DFB\u52A0\u5185\u5BB9\r\n            hostSetElementText(el,children)\r\n        }else if(shapeFlags & ShapeFlags.ARRAY_CHILDREN){ // \u5B50\u5143\u7D20\u662F\u6570\u7EC4\uFF0C\u9012\u5F52\u5904\u7406\uFF0C\u5FAA\u73AF\u521B\u5EFA\r\n            mountChildren(children,el)\r\n        }   \r\n        hostInsert(el,container,anchor)\r\n    }\r\n    const mountComponent = (vnode: any,container: any,anchor: any)=> {\r\n        // 1.\u521B\u9020\u4E00\u4E2A\u7EC4\u4EF6\u5B9E\u4F8B\r\n        // data\u548Cprops\u90FD\u662F\u54CD\u5E94\u5F0F\u7684\uFF0C\u90FD\u4F1A\u6536\u96C6\u4F9D\u8D56\r\n        // instance.data = reactive(data.call(instance.proxy))\r\n        // instance.props = reactive(props)\r\n\r\n        // \u8FD9\u4E00\u6B65\u4E3B\u8981\u662F\u521B\u9020instance ,\u53D6\u51FA vnode.type.props \u5E76\u4E14\u8D4B\u503C\u7ED9instance\r\n        let instance = vnode.component =  createComponenntInstance(vnode)\r\n        // 2.\u7ED9\u5B9E\u4F8B\u8D4B\u503C\r\n        setupComponent(instance) // --> \u8FD9\u4E00\u6B65\u628A data \u548C props \u53D8\u4E3A\u54CD\u5E94\u5F0F ,setup\u5185\u7684\u53D8\u91CF\u662F\u7528\u6237\u8C03\u7528rective\u548Cref\u53D8\u6210\u54CD\u5E94\u5F0F\u7684\r\n        // 3.\u521B\u5EFA\u4E00\u4E2Aeffect\r\n        setupRenderEffect(instance,container,anchor) // \u8FD9\u4E00\u6B65\u5F00\u59CB \u5C5E\u6027 \u548C  effect \u7684\u4F9D\u8D56\u5173\u7CFB   \r\n    }   // \u4E5F\u5C31\u662F data \u548C props \u91CC\u9762\u7684\u5C5E\u6027 \u548C\u66F4\u65B0\u51FD\u6570   componentUpdateFn \u7684\u4F9D\u8D56\u5173\u7CFB \r\n    const shouldUpdateComponent = (oldVnode: any,newVnode: any) => {\r\n        const { props:oldProps } = oldVnode\r\n        const { props:newProps } = newVnode\r\n\r\n        if(oldProps === newProps){ // \u65B0\u8001\u5C5E\u6027\u4E00\u81F4\u5C31\u4E0D\u7528\u66F4\u65B0\r\n            return false\r\n        }\r\n        return hasPropsChanged(oldProps, newProps)\r\n\r\n\r\n    }\r\n    \r\n    const updateComponent = (oldVnode: any,newVnode: any) => {\r\n        // instance\u7684\u5C5E\u6027\u53EF\u4EE5\u66F4\u6539\uFF0C\r\n        const instance = (newVnode.component = oldVnode.component)//\u5BF9\u4E8E\u5143\u7D20\u800C\u8A00\u590D\u7528\u7684\u662F\u771F\u5B9E\u8282\u70B9\uFF0C\u5BF9\u4E8E\u7EC4\u4EF6\u6765\u8BF4\uFF0C\u590D\u7528\u7684\u662F\u5B9E\u4F8B\u5BF9\u8C61\r\n        // \u800C component \u4FDD\u5B58\u7684\u5C31\u662F\u5F53\u524D\u865A\u62DFdom\u5BF9\u5E94\u7684\u7EC4\u4EF6\u5B9E\u4F8B\u5BF9\u8C61\r\n        \r\n        // \u62FF\u51FA\u5404\u81EA\u865A\u62DFdom\u4E2D\u7684\u5C5E\u6027\u8FDB\u884C\u6BD4\u5BF9\uFF0C\u5C31\u50CF\u8FD9\u91CC\u7684 address,\u6CE8\u610F\uFF0C\u8FD9\u91CC\u662F\u865A\u62DFdom\u7684\uFF0C\u4E0D\u662F\u7EC4\u4EF6\u5B9E\u4F8B\u7684\r\n        // h(MyComp,{address:this.flag ? '\u5730\u7403' : '\u6708\u7403'})\r\n  \r\n        // \u9700\u8981\u66F4\u65B0\u5C31\u5F3A\u5236\u8C03\u7528\u7EC4\u4EF6\u7684 update \u65B9\u6CD5\r\n        if(shouldUpdateComponent(oldVnode,newVnode)){\r\n            instance.next = newVnode //\u5C06\u65B0\u7684\u865A\u62DF\u8282\u70B9\u653E\u5230 next\u5C5E\u6027\u4E0A\u9762\r\n            // \u7EDF\u4E00\u8C03\u7528update\u66F4\u65B0\r\n            instance.update()\r\n        }\r\n    }\r\n    const patch = (oldVnode: any,newVnode: any,container: any,anchor: any = null) => { // \u6838\u5FC3\u7684patch\u65B9\u6CD5\r\n        // debugger\r\n        // \u83B7\u53D6\u5F53\u524D\u7EC4\u4EF6\u6302\u8F7D\u7684\u7236\u8282\u70B9\r\n    \r\n\r\n        if(oldVnode === newVnode) return;//\u82E5\u65B0\u8001\u865A\u62DFdom\u76F8\u540C\uFF0C\u76F4\u63A5\u8FD4\u56DE\r\n        if(oldVnode && !isSameVnode(oldVnode,newVnode)){// \u5224\u65AD\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u662F\u5426\u76F8\u540C 1)\u5904\u7406type\u4E0D\u540C\r\n            unmount(oldVnode)// \u5220\u9664\u65E7\u8282\u70B9\r\n            oldVnode = null; // \u628A\u65E7\u8282\u70B9\u7F6E\u4E3Anull\u5C31\u4F1A\u81EA\u52A8\u8D70\u5230\u521B\u5EFA\u65B0\u8282\u70B9\u90A3\u4E00\u4E2A\u5FAA\u73AF\u53BB\r\n        }\r\n        const { type, shapeFlags}  = newVnode\r\n\r\n        switch(type){\r\n            case Text:\r\n                processText(oldVnode,newVnode,container) // 2)\u5904\u7406\u7684type\u90FD\u662F Text\u7C7B\u578B\r\n                break;\r\n            case Fragment:\r\n                processFragment(oldVnode,newVnode,container,anchor) // 3) Fragment \u7C7B\u578B\r\n                break\r\n            default: \r\n                if(shapeFlags & ShapeFlags.ELEMENT){ // 4)\u5904\u7406\u90FD\u662F\u666E\u901Adom\u5143\u7D20\r\n                    processElement(oldVnode,newVnode,container,anchor)\r\n                }\r\n                if(shapeFlags & ShapeFlags.COMPONENT){ // 5) \u6E32\u67D3\u81EA\u5B9A\u4E49\u7EC4\u4EF6\r\n                    processComponent(oldVnode,newVnode,container,anchor)\r\n                }\r\n        }\r\n        // newVnode.el = container\r\n    }\r\n    const render = (vnode: any,container: any) => {\r\n        // console.log(\"\uD83D\uDE80 ~ file: renderer.ts ~ line 8 ~ render ~ vnode,container\", vnode,container)\r\n        if(vnode == null){// \u5982\u679C\u5F53\u524Dvnode\u4E3A\u7A7A --> render(null)\uFF0C\u8BF4\u660E\u662F\u4E00\u4E2A\u5378\u8F7D\u903B\u8F91\r\n            if(container._vnode){\r\n                unmount(container._vnode)\r\n            }\r\n        }else{// \u521D\u59CB\u5316\u6E32\u67D3 + \u66F4\u65B0\u903B\u8F91\r\n            // container._vnode\u5B58\u653E\u7684\u662F\u65E7\u7684\u865A\u62DFdom,\u5982\u679C\u4E3A\u7A7A\uFF0C\u8868\u793A\u662F\u7B2C\u4E00\u6B21\u6E32\u67D3\r\n            patch(container._vnode || null,vnode,container)\r\n            \r\n        }\r\n        container._vnode = vnode \r\n    }\r\n    return {\r\n        render\r\n    }\r\n}\r\n", "import { isArray, isObject } from '@vue/shared';\r\nimport { createVnode, isVnode } from \"./vnode\";\r\n/**\r\n// \u6CE8\u610F type \u6709\u53EF\u80FD\u662F string \u4E5F\u6709\u53EF\u80FD\u662F\u5BF9\u8C61\r\n// \u5982\u679C\u662F\u5BF9\u8C61\u7684\u8BDD\uFF0C\u90A3\u4E48\u5C31\u662F\u7528\u6237\u8BBE\u7F6E\u7684 options\r\n// type \u4E3A string \u7684isVnode\u65F6\u5019\r\n// createVnode(\"div\")\r\n// type \u4E3A\u7EC4\u4EF6\u5BF9\u8C61\u7684\u65F6\u5019\r\n// createVnode(App)\r\n */\r\nexport function h(type:any, propsChildren?:any,children?: string | Array<any>){\r\n    // debugger\r\n    const LEN = arguments.length; \r\n    if(LEN === 2){ // h('div', { id: 'foo' })  + h('div', ['hello', h('span', 'hello')])\r\n        if (isObject(propsChildren) && !isArray(propsChildren)) {\r\n            // single vnode without props\r\n            if (isVnode(propsChildren)) {\r\n              return createVnode(type, null, [propsChildren])\r\n            }\r\n            // props without children\r\n            return createVnode(type, propsChildren)\r\n        } else {\r\n          // h(Fragment,[h('h2',null,'66666'),h('h1',null,'77777777')] --> \u8FD9\u6837\u5B50\u7684\u8BDD\u4F1A\u81EA\u52A8\u628Aprops\u8D4B\u503C\u4E3A null\r\n          // omit props\r\n          return createVnode(type, null, propsChildren)\r\n        }\r\n    }else{\r\n        if(LEN > 3){\r\n            children = Array.prototype.slice.call(arguments, 2)\r\n        }else if(LEN === 3 && isVnode(children)){ //\u7B49\u4E8E\u4E09\u4E2A  h('div',{} , h('span', 'hello'))\r\n            children = [children]\r\n        }\r\n        return createVnode(type, propsChildren, children)\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * \r\n\u9664\u4E86 type \u5916\uFF0C\u5176\u4ED6\u53C2\u6570\u90FD\u662F\u53EF\u9009\u7684\r\nh('div')\r\nh('div', { id: 'foo' })\r\n\r\n// attribute \u548C property \u90FD\u53EF\u4EE5\u7528\u4E8E prop\r\n// Vue \u4F1A\u81EA\u52A8\u9009\u62E9\u6B63\u786E\u7684\u65B9\u5F0F\u6765\u5206\u914D\u5B83\r\nh('div', { class: 'bar', innerHTML: 'hello' })\r\n\r\n// class \u4E0E style \u53EF\u4EE5\u50CF\u5728\u6A21\u677F\u4E2D\u4E00\u6837\r\n// \u7528\u6570\u7EC4\u6216\u5BF9\u8C61\u7684\u5F62\u5F0F\u4E66\u5199\r\nh('div', { class: [foo, { bar }], style: { color: 'red' } })\r\n\r\n// \u4E8B\u4EF6\u76D1\u542C\u5668\u5E94\u4EE5 onXxx \u7684\u5F62\u5F0F\u4E66\u5199\r\nh('div', { onClick: () => {} })\r\n\r\n// children \u53EF\u4EE5\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\r\nh('div', { id: 'foo' }, 'hello')\r\n\r\n// \u6CA1\u6709 prop \u65F6\u53EF\u4EE5\u7701\u7565\u4E0D\u5199\r\nh('div', 'hello')\r\nh('div', [h('span', 'hello')])\r\n\r\n// children \u6570\u7EC4\u53EF\u4EE5\u540C\u65F6\u5305\u542B vnode \u548C\u5B57\u7B26\u4E32\r\nh('div', ['hello', h('span', 'hello')])\r\n */\r\n", "import { currentInstance, setCurrentInstance } from './component'\r\n\r\n\r\nexport const enum LifeCYcleHooks {\r\n    BEFORE_MOUNT = 'bm',\r\n    MOUNTED = \"m\",\r\n    BEFORE_UPDATE = 'bu',\r\n    UPDATED = 'u'\r\n}\r\n\r\nfunction createHooks(type:string){\r\n    return (hook: any,target:any = currentInstance)=>{\r\n        if(target){\r\n            // debugger\r\n            const hooks = target[type] || (target[type] = [])\r\n            // \u8FD0\u7528\u95ED\u5305\u4FDD\u5B58 target \u7EC4\u4EF6\u5B9E\u4F8B\u5BF9\u8C61\r\n            const wrappedHook = () => {\r\n                setCurrentInstance(target)\r\n                hook()\r\n                setCurrentInstance(null)\r\n            }\r\n            hooks.push(wrappedHook)\r\n        }\r\n    }\r\n}\r\n\r\nexport const onBeforeMount = createHooks(LifeCYcleHooks.BEFORE_MOUNT)\r\nexport const onMounted = createHooks(LifeCYcleHooks.MOUNTED)\r\nexport const onBeforeUpdate = createHooks(LifeCYcleHooks.BEFORE_UPDATE)\r\nexport const onUpdated = createHooks(LifeCYcleHooks.UPDATED)\r\n"],
  "mappings": "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",
  "names": []
}
